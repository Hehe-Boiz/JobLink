<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>JobLink Super Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { background-color: #f8f9fa; }
        .sidebar { height: 100vh; background: #130160; color: white; position: fixed; width: 250px; }
        .sidebar a { color: rgba(255,255,255,0.8); text-decoration: none; display: block; padding: 15px; }
        .sidebar a:hover, .sidebar a.active { background: #FF9228; color: white; }
        .main-content { margin-left: 250px; padding: 20px; }
        .stat-card { border: none; border-radius: 15px; color: white; transition: transform 0.3s; }
        .stat-card:hover { transform: translateY(-5px); }
        .bg-gradient-1 { background: linear-gradient(45deg, #4099ff, #73b4ff); }
        .bg-gradient-2 { background: linear-gradient(45deg, #2ed8b6, #59e0c5); }
        .bg-gradient-3 { background: linear-gradient(45deg, #FFB64D, #ffcb80); }
        .bg-gradient-4 { background: linear-gradient(45deg, #FF5370, #ff869a); }
        .card-icon { font-size: 40px; opacity: 0.4; position: absolute; right: 20px; top: 20px; }
    </style>
</head>
<body>

    <div class="sidebar d-flex flex-column p-3">
        <h3 class="mb-4 text-center fw-bold">JobLink <span style="color:#FF9228">Admin</span></h3>
        <a href="#" class="active"><i class="fas fa-chart-line me-2"></i> Tổng quan</a>
        <a href="/admin/users/employerprofile/"><i class="fas fa-building me-2"></i> Duyệt Employer</a>
        <a href="/admin/jobs/job/"><i class="fas fa-briefcase me-2"></i> Quản lý Job</a>
        <a href="/admin/users/user/"><i class="fas fa-users me-2"></i> Người dùng</a>
        <div class="mt-auto">
            <a href="/admin/logout/"><i class="fas fa-sign-out-alt me-2"></i> Đăng xuất</a>
        </div>
    </div>

    <div class="main-content">
        <h2 class="mb-4 fw-bold text-secondary">Dashboard Thống Kê</h2>

        <div class="row g-4 mb-4">
            <div class="col-md-3">
                <div class="card stat-card bg-gradient-1 p-3">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>Tin tuyển dụng</h5>
                            <h2 class="fw-bold">{{ stats.jobs }}</h2>
                        </div>
                        <i class="fas fa-file-alt card-icon"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card bg-gradient-2 p-3">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>Ứng viên</h5>
                            <h2 class="fw-bold">{{ stats.candidates }}</h2>
                        </div>
                        <i class="fas fa-user-graduate card-icon"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card bg-gradient-3 p-3">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>Nhà tuyển dụng</h5>
                            <h2 class="fw-bold">{{ stats.employers }}</h2>
                        </div>
                        <i class="fas fa-building card-icon"></i>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card stat-card bg-gradient-4 p-3">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5>Doanh thu (VND)</h5>
                            <h3 class="fw-bold">{{ stats.revenue }}</h3>
                        </div>
                        <i class="fas fa-coins card-icon"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="card shadow-sm border-0 p-3">
                    <h5 class="mb-3 text-secondary">Tăng trưởng tin đăng (Năm nay)</h5>
                    <canvas id="myChart" height="150"></canvas>
                </div>
            </div>

            <div class="col-md-4">
                <div class="card shadow-sm border-0 p-3">
                    <h5 class="mb-3 text-secondary">Tin đăng mới nhất</h5>
                    <ul class="list-group list-group-flush">
                        {% for job in recent_jobs %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <div>
                                <strong>{{ job.title }}</strong><br>
                                <small class="text-muted">{{ job.employer_profile.company_name }}</small>
                            </div>
                            <span class="badge bg-primary rounded-pill">Mới</span>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        const ctx = document.getElementById('myChart').getContext('2d');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: {{ chart.labels|safe }},
                datasets: [{
                    label: 'Số lượng Job',
                    data: {{ chart.data|safe }},
                    backgroundColor: '#130160',
                    borderRadius: 5
                }]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: false } },
                scales: { y: { beginAtZero: true } }
            }
        });
    </script>
</body>
</html>